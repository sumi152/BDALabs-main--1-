<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>BDA LAB</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
  <link type="text/css" rel="stylesheet" href="/public/admin.css">
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark ">
    <a class="navbar-brand" href="#">BDA Lab</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="#">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href = '/logout'>Logout</a>
        </li>
      </ul>
    </div>
  </nav>
  
  <main>
    <section class="part-1">
      <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
          <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
          <div class="carousel-item active" data-bs-interval="10000">
            <img src="/Images/bg1.jpeg" class="d-block w-100" alt="..." height="500px">
            <div class="carousel-caption d-none d-md-block">
              <a href="https://www.iiita.ac.in/" class="btn" target="_blank">Learn More</a>
            </div>
          </div>
          <div class="carousel-item" data-bs-interval="10000" >
            <img src="/Images/bg2.jpeg" class="d-block w-100" alt="..." height="500px">
            <div class="carousel-caption d-none d-md-block">
              <a href="https://www.iiita.ac.in/" class="btn" target="_blank">Learn More</a>
            </div>
          </div>
          <div class="carousel-item" data-bs-interval="10000">
            <img src="/Images/bg3.jpg" class="d-block w-100" alt="..." height="500px">
            <div class="carousel-caption d-none d-md-block">
              <a href="https://www.iiita.ac.in/" class="btn" target="_blank">Learn More</a>
            </div>
          </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="">Next</span>
        </button>
      </div>
    </section>

      

    
    <section id="about">
      <h2>About Us</h2>
      <p>Indian Institute of Information Technology Allahabad (IIITA) located in Jhalwa, Allahabad, UP, India was established in 1999, as a center of excellence in Information Technology and allied areas and is an institute of national importance by the act of parliament. IIITA aims to evolve an integrated ambiance of creative learning, researching for novelties, contributing to the growth of knowledge, mapping the knowledge into innovations, innovations in terms of innovative products, services and also in terms of re-engineering the education process itself, devising the newer tools and sophisticating the skills at higher level.</p>
    </section>
    <hr>

    <div class="ram">
    <section id="Projects">
      <h2>Projects</h2>
      <button class="button2" onclick="window.location.href='projectinput';">Add</button>  
      <b><hr></b>
    </section>
    </div>

    <div class="ram">
    <section id="Publication">
      <h2>Publications</h2>
      
      <button class="button2" onclick="window.location.href='publicationInput';">Add</button> 
      <b><hr></b>
    </section>
  </div>


  <div class="ram">
    <section id="Courses">
      <h2 id="Course">Courses</h2>
      
      <button class="button2" onclick="window.location.href='courseinput';">Add</button>  
     
      <b><hr></b>
    </section>
  </div>

  <div class="ram">
      <section id="People">
        <h2>Team Of BDA LAB</h2>
        <b><hr></b>
      </section>
      </div>
    
  
  </main>
  
  <footer>
    <p>&copy; BDA LAB 2023</p>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js" integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N" crossorigin="anonymous"></script>

</body>
<script>
  function deleteCourses(name){
    window.location.href = window.location.href ;
  console.log(name)
    fetch('/courses/delete', {
  method: 'DELETE',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name
  })
})
.then(response => {
  console.log('Deleted successfully');
})
.catch(error => {
  console.error('Error while deleting: ', error);
});
  }

  function deletePublications(id){
    window.location.href = window.location.href ;
    fetch('/publication/delete', {
  method: 'DELETE',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    id
  })
})
.then(response => {
  console.log('Deleted successfully');
})
.catch(error => {
  console.error('Error while deleting: ', error);
});
  }

  function deleteProjects(name){
    window.location.href = window.location.href ;
  console.log(name)
    fetch('/projects/delete', {
  method: 'DELETE',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name
  })
})
.then(response => {
  console.log('Deleted successfully');
})
.catch(error => {
  console.error('Error while deleting: ', error);
});
  }

  
  function deletePeople(name){
    window.location.href = window.location.href ;
  console.log(name)
    fetch('/people/delete', {
  method: 'DELETE',
  headers: {
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    name
  })
})
.then(response => {
  console.log('Deleted successfully');
})
.catch(error => {
  console.error('Error while deleting: ', error);
});
  }

  fetch('http://localhost:3000/courses',).then((res)=>res.json()).then((data)=>{
    console.log(data)
    data.forEach(element => {
      const parent = document.getElementById('Courses');
const ul = document.createElement('ul');
const li = document.createElement('li');
const h3 = document.createElement('h3');
h3.textContent = element.course_name;
const p1 = document.createElement('p');
p1.textContent = "Instructor: " + element.instructor;
const p2 = document.createElement('p');
var taList = "";
element.ta.forEach((element)=>{
   taList = taList + element + ", ";
})
console.log(taList.toString());
p2.textContent = 'TAs : ' + taList;
const p3 = document.createElement('p');
const p4 = document.createElement('p');
p4.innerHTML = `<button class="button1" onclick="deleteCourses('${element.course_name}')">Delete</button> `
p3.textContent = 'Number of Students:  ' + element.number_of_students;
li.appendChild(h3);
li.appendChild(p1);
li.appendChild(p2);
li.appendChild(p3);
ul.appendChild(li);
h3.innerHTML += '</h3>'; 
p1.innerHTML= '<div style="font-weight:700; font-size:20px; display: flex; ">' + '<span style="margin-right:10px">' + p1.innerHTML +'</span>' +  p4.innerHTML + '</div>'
p2.innerHTML= '<div style="font-weight:500; font-size:20px">' + p2.innerHTML + '</div>'
p3.innerHTML= '<div style="font-weight:500; font-size:20px">' + p3.innerHTML + '</div>'

parent.appendChild(ul);
    });
  }).catch((e)=>{
    console.log(e)
    console.log("Error Occured!")
  })
    fetch('http://localhost:3000/publications',).then((res)=>res.json()).then(async (data)=>{
    console.log(data)
    data.forEach(async(element) => {
      const parent = document.getElementById('Publication');
      const ul = document.createElement('ul');
      const li = document.createElement('li');
      const h3 = document.createElement('h3');
      h3.textContent = element.name;
      const p1 = document.createElement('p');
      p1.textContent = "name: " + element.name;
      const p2 = document.createElement('p');
      p2.textContent = "supervisor: " + element.supervisor;
      const p3 = document.createElement('p');
      p3.textContent = 'Abstract : ' + element.abstract;
      const p4 = document.createElement('p');
      p4.innerHTML = 'Authors : '
      await element.authors.forEach(email=>{
				fetch('http://localhost:3000/peoplebyemail?email=' + email,).then((res)=>res.json()).then((data)=>{
    			data.forEach(entry => {
				p4.innerHTML = p4.innerHTML + entry.fname + ' ' + entry.lname + ', ';
				});
			})});
      const p5 = document.createElement('p');
      p5.textContent = 'Publication Date:  ' + element.pub_date;
      const p6 = document.createElement('p');
      p6.textContent = 'Publisher:  ' + element.publisher;
      const p7 = document.createElement('p');
      p7.textContent = 'Location:  ' + element.location;
      const p8 = document.createElement('p');
      p8.innerHTML = `<button class="button1" onclick="deletePublications('${element._id}')">Delete</button> `
      li.appendChild(h3);
      li.appendChild(p1);
      li.appendChild(p2);
      li.appendChild(p3);
      li.appendChild(p4);
      li.appendChild(p5);
      li.appendChild(p6);
      li.appendChild(p7);
      li.appendChild(p8);
      ul.appendChild(li);
h3.innerHTML += '</h3>'; 
p1.innerHTML= '<div style="font-weight:700; font-size:20px">' + p1.innerHTML + '</div>'
p2.innerHTML= '<div style="font-weight:500; font-size:20px">' + p2.innerHTML + '</div>'
p3.innerHTML= '<div style="font-weight:500; font-size:20px">' + p3.innerHTML + '</div>'

parent.appendChild(ul);
    });
  }).catch((e)=>{
    console.log(e)
    console.log("Error Occured!")
  })

  fetch('http://localhost:3000/projects',).then((res)=>res.json()).then((data)=>{
    console.log(data)
    data.forEach(async(element) => {
      const parent = document.getElementById('Projects');
    const ul = document.createElement('ul');
    const li = document.createElement('li');
    const h3 = document.createElement('h3');
    h3.textContent = element.course_name;
    const p1 = document.createElement('p');
    p1.textContent = "Project Title: " + element.title;
    const p2 = document.createElement('p');
    p2.textContent = 'Objective : ' + element.objective;
    const p3 = document.createElement('p');
    p3.textContent = 'Description : ' + element.description;
    const p4 = document.createElement('p');
    p4.innerHTML = 'Team members : '
    await element.members.forEach(email=>{
            fetch('http://localhost:3000/peoplebyemail?email=' + email,).then((res)=>res.json()).then((data)=>{
              data.forEach(entry => {
            p4.innerHTML = p4.innerHTML + entry.fname + ' ' + entry.lname + ', ';
            });
          })});
    const p5 = document.createElement('p');
    p5.textContent = 'Instructor : ' + element.instructor;
    const p6 = document.createElement('p');
    p6.textContent = 'Date : ' + element.date;
    const p7 = document.createElement('p');
    p7.textContent = 'References : ' + element.references;
    const p8 = document.createElement('p');
    p8.innerHTML = `<button class="button1" onclick="deleteProjects('${element.title}')">Delete</button> `
    p1.innerHTML= '<div style="font-weight:700; font-size:20px; display: flex; ">' + '<span style="margin-right:10px">' + p1.innerHTML +'</span>' + '</div>'
    li.appendChild(h3);
    li.appendChild(p1);
    li.appendChild(p2);
    li.appendChild(p3);
    li.appendChild(p4);
    li.appendChild(p5);
    li.appendChild(p6);
    li.appendChild(p7);
    li.appendChild(p8);
    ul.appendChild(li);
p2.innerHTML= '<div style="font-weight:500; font-size:18px">' + p2.innerHTML + '</div>'
p1.innerHTML = '<h3>' + p1.innerHTML + '</h3>'
parent.appendChild(ul);
    });
  }).catch((e)=>{
    console.log(e)
    console.log("Error Occured!")
  })
  fetch('http://localhost:3000/people',).then((res)=>res.json()).then((data)=>{
    console.log(data)
    data.forEach(element => {
      const parent = document.getElementById('People');
const ul = document.createElement('ul');
const li = document.createElement('li');
const h3 = document.createElement('h3');
h3.textContent = "Name: " + element.fname + " " + element.lname;
const p1 = document.createElement('p');
p1.textContent = "Email: " + element.email;
const p2 = document.createElement('p');
p2.textContent = 'Post : ' + element.roll;
li.appendChild(h3);
li.appendChild(p1);
li.appendChild(p2);
ul.appendChild(li)
const p4 = document.createElement('p');
h3.innerHTML += '</h3>'; 
p1.innerHTML= '<div style="font-weight:700; font-size:20px">' + p1.innerHTML + '</div>'
p2.innerHTML= '<div style="font-weight:400; font-size:20px">' + p2.innerHTML + '</div>'
p1.innerHTML= '<div style="font-weight:700; font-size:20px; display: flex; ">' + '<span style="margin-right:10px">' + p1.innerHTML +'</span>' +  p4.innerHTML + '</div>'
parent.appendChild(ul);
    });
  }).catch((e)=>{
    console.log(e)
    console.log("Error Occured!")
  })
 
</script>
</html>